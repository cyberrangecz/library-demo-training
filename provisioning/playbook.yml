---

- name: disable qxl
  hosts:
      - routers
      - hosts
  gather_facts: yes
  become: yes
  tasks:
      - include_role:
            name: kypo-disable-qxl
        when: ansible_os_family == 'Debian'

- name: user access
  hosts:
      - client
  gather_facts: no
  become: yes
  tasks:
      - include_role:
            name: kypo-user-access
        vars:
            kypo_user_access_username: '{{ user }}'
            kypo_user_access_password: 'kypo'
        with_items:
            - kypo
            - root
        loop_control:
            loop_var: user

- name: set up server
  hosts: server
  become: yes
  roles:
    - name: server

- name: set up client
  hosts: client
  become: yes
  roles:
    - name: client

...
